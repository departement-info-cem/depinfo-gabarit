# TP4 - Post Hub (25%)

<center>![BanniÃ¨re](../../static/img/tp4/header.png)</center>

## ğŸ“ Consignes

* ğŸ‘¥ Le TP est fait en **Ã©quipe de deux imposÃ©e**.
* ğŸ“¦ Le projet client utilise le framework **Angular** et le projet serveur utilise le framework **ASP.NET Core**. (Projets de dÃ©part fournis)
* ğŸ‘€ Attention au plagiat
* ğŸ–¥ Il faudra respecter la structure existante dans les deux projets.
* â° Attention, il y a une **remise partielle le 1 mai Ã  17h**. (Parties A Ã  C)
* ğŸ“¬ La remise est le **17 mai Ã  23h59**.

:::tip

Pendant le TP, ne vous cassez jamais la tÃªte Ã  rÃ©gler les conflits de merge pour les **migrations**. Faites simplement une nouvelle migration dans chaque nouvelle branche.

:::

## ğŸ“¦ Projets de dÃ©part

Les [projets Angular + ASP.NET Core](../../static/files/tp4.zip) sont fournis pour ce TP. 

Une application qui sert de multi-forums de discussion vous est fournie. Vous devrez ajouter des fonctionnalitÃ©s Ã  l'application, principalement pour la gestion d'images et de rÃ´les.

En rÃ©sumÃ©, l'application contient des `hubs`, des `posts` et des `commentaires`.

* Un `hub` contient des `posts` sur un **thÃ¨me commun** et un `post` contient des `commentaires`.
* On peut rÃ©pondre Ã  un `commentaire` avec des sous-`commentaires` Ã  l'infini.

Ci-dessous, on peut voir un `post` avec plusieurs `commentaires` :

<center>![DÃ©mo de PostHub](../../static/img/tp4/demo.png)</center>

## ğŸ“œ RÃ©sumÃ© des fonctionnalitÃ©s

ğŸ‘¥ Chaque Ã©quipe aura un **membre hot-dog ğŸŒ­** et un **membre trottinette ğŸ›´**. Vous serez **Ã©valuÃ©s sÃ©parÃ©ment** pour la plupart des fonctionnalitÃ©s. Vous Ãªtes obligÃ©s d'implÃ©menter seulement vos propres fonctionnalitÃ©s, telles que listÃ©es ci-dessous.

ğŸ” Ceci n'est qu'un rÃ©sumÃ© des fonctionnalitÃ©s, vÃ©rifiez les Ã©noncÃ©s **par membre** pour avoir tous les dÃ©tails et indices.

<table>
<tr>
    <th>Membre ğŸŒ­</th>
    <th>Membre ğŸ›´</th>
</tr>
<tr>
    <td colspan="2">
    Ã‰tape A-ğŸŒ­ğŸ›´<br/><br/>
    DÃ©cidez quel membre sera ğŸ›´ et quel membre sera ğŸŒ­. Si votre partenaire est absent(e), vous Ãªtes obligÃ©(e) de choisir seul(e) pour pouvoir commencer le travail dÃ¨s maintenant.
    </td>
</tr>
<tr>
    <td colspan="2">
    Ã‰tape B-ğŸŒ­ğŸ›´<br/><br/>
    Suivez les Ã©tapes dans les notes de cours sur Git :
    * CrÃ©ez un repo de dÃ©part avec les deux projets.
    * Ajoutez l'autre membre et l'enseignant(e) en collaborateur.
    * CrÃ©er la branche `dev`. Il faudra crÃ©er une nouvelle branche individuelle pour chaque Ã©tape du TP. Il faudra effectuer un merge une fois chaque Ã©tape terminÃ©e.
    </td>
</tr>
<tr>
    <td>
        Ã‰tape C-ğŸŒ­<br/><br/>
        Lorsquâ€™on crÃ©e un commentaire, on doit Ãªtre capable dâ€™y joindre zÃ©ro Ã  plusieurs images.
    </td>
    <td>
        Ã‰tape C-ğŸ›´<br/><br/>
        Lorsquâ€™on crÃ©e un post, on doit Ãªtre capable dâ€™y joindre zÃ©ro Ã  plusieurs images.
    </td>
</tr>
<tr>
    <td colspan="2">
    ğŸ›‘ HALTE !<br/>
    * Au plus tard le **1 mai Ã  17h**, vous devez, Ã  deux, vous prÃ©senter en classe et prendre 5 minutes pour montrer les Ã©tapes A, B et C Ã  l'enseignant(e).
    * Si vous ne le faites pas, il y aura une **pÃ©nalitÃ© de 25%**.
    * Il n'y a rien Ã  prÃ©parer pour la prÃ©sentation, Ã  part le TP.
    </td>
</tr>
<tr>
    <td>
        Ã‰tape D-ğŸŒ­<br/><br/>
        Les utilisateurs doivent pouvoir choisir un avatar personnalisÃ©. Il est affichÃ© Ã  cÃ´tÃ© de leurs commentaires. (Mais pas dans le message principal dâ€™un post) Lâ€™avatar peut Ãªtre changÃ© Ã  tout moment.
    </td>
    <td>
        Ã‰tape D-ğŸ›´<br/><br/>
        Si un post (commentaire principal dâ€™un post) contient plus de 4 images, les images sont affichÃ©es avec un carrousel glidejs plutÃ´t quâ€™en simple rangÃ©e. Les commentaires dâ€™un post nâ€™ont jamais de carrousel.
    </td>
</tr>
<tr>
    <td>
        Ã‰tape E-ğŸŒ­<br/><br/>
        Cliquer sur une image doit permettre de lâ€™afficher en pleine taille, dans un autre onglet.
    </td>
    <td>
        Ã‰tape E-ğŸ›´<br/><br/>
        Lorsquâ€™on modifie un commentaire ou un post, on doit pouvoir ajouter une ou plusieurs images supplÃ©mentaires en mÃªme temps de modifier le texte. (Les anciennes images du commentaire, sâ€™il y en avait, sont prÃ©servÃ©es)
    </td>
</tr>
<tr>
    <td>
        Ã‰tape F-ğŸŒ­<br/><br/>
        On doit pouvoir supprimer les images dâ€™un commentaire / post, individuellement.
    </td>
    <td>
        Ã‰tape F-ğŸ›´<br/><br/>
        Lorsquâ€™on supprime un commentaire ou un post, toutes ses images doivent Ãªtre supprimÃ©es.
    </td>
</tr>
<tr>
    <td>
        Ã‰tape G-ğŸŒ­<br/><br/>
        Les utilisateurs peuvent signaler (Report) les commentaires / posts des autres utilisateurs.
    </td>
    <td>
        Ã‰tape G-ğŸ›´<br/><br/>
        Les utilisateurs doivent pouvoir se connecter en utilisant leur nom dâ€™utilisateur OU leur adresse courriel. (PlutÃ´t que seulement leur nom dâ€™utilisateur) Les utilisateurs doivent pouvoir changer leur mot de passe.
    </td>
</tr>
<tr>
    <td>
        Ã‰tape H-ğŸŒ­<br/><br/>
        Un rÃ´le modÃ©rateur existe. Les modÃ©rateurs peuvent voir la liste des commentaires signalÃ©s. Ils peuvent supprimer les commentaires de leur choix via cette liste. Un utilisateur avec le rÃ´le modÃ©rateur est ajoutÃ© dans le seed.
    </td>
    <td>
        Ã‰tape H-ğŸ›´<br/><br/>
        Un rÃ´le administrateur existe. Les administrateurs peuvent ajouter le rÃ´le modÃ©rateur Ã  des utilisateurs. Un utilisateur avec le rÃ´le administrateur est ajoutÃ© dans le seed.

    </td>
</tr>
<tr>
    <td colspan="2">
    Ã‰tape I-ğŸŒ­ğŸ›´<br/><br/>
    Sâ€™assurer que les critÃ¨res communs (Voir grille de correction) sont respectÃ©s. Sâ€™assurer que tout a Ã©tÃ© merge dans dev, puis dans main. Sâ€™assurer que tout fonctionne.
    </td>
</tr>
</table>

## âœ… Grille de correction

### Membre ğŸŒ­ (30 pts)

<table>
    <tr>
        <th>CritÃ¨re</th>
        <th>Points</th>
    </tr>
    <tr>
        <td>On peut ajouter des images lorsquâ€™on crÃ©e un commentaire et les voir ensuite.</td>
        <td>8 pts</td>
    </tr>
    <tr>
        <td>Les utilisateurs peuvent choisir un avatar (et le prÃ©visualiser) et le modifier Ã  volontÃ©.</td>
        <td>4 pts</td>
    </tr>
    <tr>
        <td>Toute image (sauf les avatars) peut Ãªtre cliquÃ©e pour Ãªtre affichÃ©e en grand dans un nouvel onglet.</td>
        <td>2 pts</td>
    </tr>
    <tr>
        <td>Les images des posts et des commentaires peuvent Ãªtre supprimÃ©es individuellement par lâ€™auteur.</td>
        <td>6 pts</td>
    </tr>
    <tr>
        <td>Les posts / commentaires des autres utilisateurs peuvent Ãªtre signalÃ©s si on est connectÃ©.</td>
        <td>4 pts</td>
    </tr>
    <tr>
        <td>Le rÃ´le de modÃ©rateur existe, permet de supprimer des commentaires signalÃ©s et prÃ©sente un utilisateur avec le rÃ´le dans le seed.</td>
        <td>6 pts</td>
    </tr>
</table>

### Membre ğŸ›´ (30 pts)

<table>
    <tr>
        <th>CritÃ¨re</th>
        <th>Points</th>
    </tr>
    <tr>
        <td>On peut ajouter des images lorsquâ€™on crÃ©e un post et les voir ensuite.</td>
        <td>8 pts</td>
    </tr>
    <tr>
        <td>Les images dâ€™un post sont affichÃ©es dans un carrousel Ã  5 images ou plus.</td>
        <td>4 pts</td>
    </tr>
    <tr>
        <td>La modification de post / commentaire permet dâ€™ajouter des images.</td>
        <td>6 pts</td>
    </tr>
    <tr>
        <td>Supprimer un post ou un commentaire supprime ses images.</td>
        <td>3 pts</td>
    </tr>
    <tr>
        <td>La connexion fonctionne avec le nom dâ€™utilisateur et le courriel.</td>
        <td>1 pt</td>
    </tr>
    <tr>
        <td>On peut modifier son mot de passe Ã  volontÃ©.</td>
        <td>2 pt</td>
    </tr>
    <tr>
        <td>Le rÃ´le dâ€™administrateur existe, permet de nommer des modÃ©rateurs et prÃ©sente un utilisateur avec le rÃ´le dans le seed.</td>
        <td>6 pts</td>
    </tr>
</table>

### Commun (20 pts)

<table>
    <tr>
        <th>CritÃ¨re</th>
        <th>Points</th>
    </tr>
    <tr>
        <td>SÃ©curitÃ© sur le serveur (Aucune action ne peut Ãªtre exÃ©cutÃ©e par un utilisateur qui nâ€™en a pas le droit) Ceci touche les objets qui ne peuvent Ãªtre modifiÃ©s que par leur auteur et les opÃ©rations qui ne peuvent Ãªtre utilisÃ©es que par les modÃ©rateurs / administrateurs. Cela touche aussi Ã  des choses plus subtiles comme ne pas pouvoir signaler son propre commentaire.</td>
        <td>6 pts</td>
    </tr>
    <tr>
        <td>Fausse sÃ©curitÃ© sur le client Angular. (Aucun bouton permettant de faire une action quâ€™on nâ€™a pas le droit de faire ne doit Ãªtre VISIBLE dans les pages Web.)</td>
        <td>3 pts</td>
    </tr>
    <tr>
        <td>Lâ€™architecture du projet serveur respecte les lignes directrices vues dans les notes de cours. (Les contrÃ´leurs nâ€™ont pas accÃ¨s au DbContext, usage de Models et de DTOs au besoin, etc.) De plus, sur le serveur, Ã©vitez la rÃ©pÃ©tition de code dans la mesure du raisonnable.</td>
        <td>3 pts</td>
    </tr>
    <tr>
        <td>Toute image supprimÃ©e / remplacÃ©e dans la BD doit Ãªtre supprimÃ©e du disque Ã©galement.</td>
        <td>1 pt</td>
    </tr>
    <tr>
        <td>Lâ€™architecture du projet client respecte les lignes directrices du cours. (Pas de requÃªte avec HttpClient dans un composant, usage de Models, services, composants, etc.)</td>
        <td>2 pts</td>
    </tr>
    <tr>
        <td>
            Git a Ã©tÃ© utilisÃ© de maniÃ¨re appropriÃ©e, câ€™est-Ã -dire :
            * Une branche dev a Ã©tÃ© crÃ©Ã©e et elle a seulement Ã©tÃ© merge dans main Ã  la toute fin du TP.
            * Une branche a Ã©tÃ© crÃ©Ã©e Ã  partir de la branche dev pour chaque Ã©tape / fonctionnalitÃ© pour limiter les conflits avec son coÃ©quipier.
            * â›” Le franÃ§ais est Ã©valuÃ© dans les messages des commits.
            * Les titres et les descriptions des commits sont prÃ©sents, appropriÃ©s et clairs.
        </td>
        <td>5 pts</td>
    </tr>
    <tr>
        <td>Des fonctionnalitÃ©s qui Ã©taient dÃ©jÃ  implÃ©mentÃ©es se sont mises Ã  ne plus fonctionner.</td>
        <td>-10 pts</td>
    </tr>
    <tr>
        <td>L'interface est dÃ©formÃ©e ou ne correspond pas grossiÃ¨rement aux exemples illustrÃ©s dans l'Ã©noncÃ©.</td>
        <td>-5 pts</td>
    </tr>
    <tr>
        <td>La prÃ©sentation des Ã©tapes A Ã  C n'a pas Ã©tÃ© faite.</td>
        <td>-12.5 pts</td>
    </tr>
</table>



## ğŸ“¶ Liste des requÃªtes pour rÃ©fÃ©rence

<center>![Vue swagger](../../static/img/tp4/swagger.png)</center>

## ğŸ” Composants mÃ©langeants

### PostComponent

`PostComponent` est utilisÃ© pour afficher un post en entier.
<center>![Post](../../static/img/tp4/post.png)</center>
<hr/>

### EditPostComponent

`EditPostComponent`Â est utilisÃ© pour crÃ©er un nouveau post. Il est accessible si on clique sur Â« Nouveau post Â» dans un hub.

<center>![Bouton edit post](../../static/img/tp4/editPostButton.png)![Edit post](../../static/img/tp4/editPost.png)</center>
<hr/>

### CommentComponent

`CommentComponent` est utilisÃ© **pour chaque commentaire** qui ne soit pas le message principal d'un post.

<center>![Post](../../static/img/tp4/comment.png)</center>
<hr/>

## ğŸ‘¥ Ã‰quipes

### Groupe 1010

|Personne 1|Personne 2|
|:-:|:-:|
|â›°|ğŸ’©|
|ğŸ§ |ğŸ¤”|
|ğŸ¦Š|ğŸ•¹|
|ğŸ¸|ğŸµ|
|ğŸ–¼|ğŸ“|
|ğŸ‘»|ğŸ‘»|
|ğŸ|ğŸ |
|âŒ|ğŸ‘€|
|âœ…|ğŸ“š|
|ğŸ¤¿|ğŸ¦¥|
|ğŸ‘‰|ğŸ‘ˆ|

### Groupe 1020

|Personne 1|Personne 2|
|:-:|:-:|
|ğŸ•|ğŸ˜´|
|ğŸ±â€ğŸ‘¤|ğŸŒ¹|
|ğŸ¤µ|ğŸ”´|
|ğŸ’¾|ğŸ‘‹|
|2ï¸âƒ£|ğŸŒ…|
|ğŸˆ|ğŸ”|
|ğŸ‘|ğŸ¥|
|ğŸ¦†|ğŸ˜‚|
|9ï¸âƒ£|ğŸ”„|

### Mixte

|Personne 1|Personne 2|
|:-:|:-:|
|ğŸŸ|ğŸ¨|
|ğŸ‡|ğŸ—£|
