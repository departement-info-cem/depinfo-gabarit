# ğŸ§ª TP2 â€“ Mini-systÃ¨me dâ€™inventaire en C#

---

## Ã‰tape 1 â€” RÃ©sumÃ© du projet (vue dâ€™ensemble)

ğŸ¯ **Objectif du TP2** :  
BÃ¢tir, en console C#, un mini-systÃ¨me dâ€™inventaire pour un personnage.

Le systÃ¨me doit inclure :

- ğŸ‘¤ **Un personnage** avec minimum :
  - un **nom**
  - une **force** (force = poids maximal transportable)
- ğŸ› ï¸ **Une liste dâ€™Ã©quipement** (description, prix, poids, effet)
- ğŸ’ **Un sac Ã  dos** de taille fixe contenant des indices vers la liste dâ€™Ã©quipement
- ğŸ“œ **Un menu interactif** qui permet :
  - dâ€™acheter des items  
  - dâ€™ajouter des items au sac  
  - tout en respectant **la bourse** et **la limite de poids**

---

## ğŸ”¹ Progression

On progresse pas Ã  pas :

1. Initialiser le personnage
2. DÃ©finir les constantes et la liste dâ€™Ã©quipement
3. ImplÃ©menter les petites fonctions (*getters*)  
4. GÃ©rer le sac Ã  dos  
5. Ajouter des items au sac  
6. ImplÃ©menter lâ€™achat  
7. Construire le menu final  

---

## Ã‰tape 1 â€” Personnage

### 1ï¸âƒ£ DÃ©clarer les variables globales

```csharp
static string gNomPersonnage = "";
static int gForce = 10;
static int gBourse = 20;
```

---

### 2ï¸âƒ£ Dans Main

Appeler la fonction `InitialiserPersonnage()` :

```csharp
static void Main(string[] args)
{
    InitialiserPersonnage();
}
```

---

### 3ï¸âƒ£ Fonction InitialiserPersonnage

CrÃ©e la fonction `InitialiserPersonnage` :

```csharp
static void InitialiserPersonnage()
{
    // Ici on a le choix :
    // 1. On peut utiliser un gÃ©nÃ©rateur dÃ©jÃ  fait
    // 2. ou on peut rÃ©utiliser notre code fait au TP1

    // Pour ce TP il suffit d'avoir une variable 'gNomPersonnage' et une variable 'force' 
    CreateurPersonnage.CreerPersonnage(out gNomPersonnage, out gForce);
    // dÃ©jÃ  fourni pour que tous les Ã©tudiants aient un point de dÃ©part
}
```

---

### 4ï¸âƒ£ Fonction Tests

CrÃ©e une fonction `Tests` que tu utiliseras pour vÃ©rifier chaque nouvelle fonction que tu crÃ©eras.

```csharp
static void Tests()
{
    Console.WriteLine($"Nom : {gNomPersonnage}");
    Console.WriteLine($"Force : {gForce}");
    Console.WriteLine($"Bourse : {gBourse} po");
}
```

Appelle-la aussi dans `Main` :

```csharp
static void Main(string[] args)
{
    InitialiserPersonnage();
    Tests();
}
```



### âœ… **RÃ©sultat attendu**  
Ton programme affiche le personnage gÃ©nÃ©rÃ© avec son nom, sa force et sa bourse de dÃ©part.


## Ã‰tape 2 â€” DÃ©finir les constantes et la liste dâ€™Ã©quipement

### 1ï¸âƒ£ Constantes

On commence par dÃ©finir des constantes pour reprÃ©senter :  

- **Valeurs invalides** (quand un prix ou un poids nâ€™existe pas)  
- **Colonnes de la liste dâ€™Ã©quipement** (pour extraire description, prix, poids, effet)

```csharp
const int INVALIDE = -1;               // prix ou poids invalide
const string DESC_INVALIDE = "INVALIDE"; // description invalide

const int EQUIP_DESC = 0;  // Exemple : "Ã‰pÃ©e"
const int EQUIP_PRIX = 1;  // Exemple : 5 po
const int EQUIP_POIDS = 2; // Exemple : 2,5 Kg
const int EQUIP_EFFET = 3; // Exemple : "Attaque +3", "Points de vie +5"
```

---

### 2ï¸âƒ£ Liste dâ€™Ã©quipement

On crÃ©e un tableau de chaÃ®nes de caractÃ¨res (`string[]`).  
Chaque item est reprÃ©sentÃ© par une ligne avec le format suivant :

```
"Nom;Prix;Poids;Effet"
```

Exemple enrichi avec des **emojis Windows** ğŸ‰ :

```csharp
// ğŸ‘‡ Liste d'Ã©quipement enrichie + emojis Windows
static string[] gListeEquipement = {
    "âš”  Ã‰pÃ©e;5; 6,5 ;Attaque +3",
    "ğŸ§ª Potion de vie;4; 0,5 ;Points de vie +5",
    "ğŸ¥– Ration;2;4,2;Points de vie +4",
    "ğŸ›¡ Bouclier en bois;6;7,0;DÃ©gÃ¢ts -2",
    "ğŸ¯ Arc court;7;2,0;Initiative",
    "ğŸ¹ Carquois;3;1,0;-",
    "ğŸ”¦ Torche;1;0,4;Annule pÃ©nalitÃ© de pÃ©nombre",
    "ğŸ§¥ Cape magique;3;1,2;Esquive 25%",
    "ğŸ’ Anneau cabossÃ©;2;0,1;Mana x 2"
};
```

---

### 3ï¸âƒ£ VÃ©rification

Ajoute un appel dans la fonction `Tests()` pour vÃ©rifier que les items sont bien enregistrÃ©s :  

```csharp
static void Tests()
{
    Console.WriteLine("=== Liste dâ€™Ã©quipement ===");
    for (int i = 0; i < gListeEquipement.Length; i++)
    {
        Console.WriteLine($"Item brut : {gListeEquipement[i]}");
    }
}
```

---

âœ… **RÃ©sultat attendu** :  
Quand tu exÃ©cutes `Tests()`, la console doit afficher la liste brute des items, par exemple :

```
=== Liste dâ€™Ã©quipement ===
Item brut : âš”  Ã‰pÃ©e;5; 6,5 ;Attaque +3
Item brut : ğŸ§ª Potion de vie;4; 0,5 ;Points de vie +5
Item brut : ğŸ¥– Ration;2;4,2;Points de vie +4
...
```
---

## Ã‰tape 3 â€” ImplÃ©menter les petites fonctions (*getters*)

### ğŸ¯ Objectif

CrÃ©er des fonctions qui permettent **dâ€™accÃ©der aux informations dâ€™un item** dans la liste dâ€™Ã©quipement.  
Ces fonctions (*getters*) simplifient le code et Ã©vitent de rÃ©pÃ©ter la logique de dÃ©coupage (`Split`) dans tout le programme.

---

### 1ï¸âƒ£ Les getters Ã  Ã©crire

- `ObtenirPrixEquipement(int indexItem)` â†’ retourne le **prix** dâ€™un item.  
- `ObtenirPoidsEquipement(int indexItem)` â†’ retourne le **poids** dâ€™un item.  
- `ObtenirDescriptionEquipement(int indexItem)` â†’ retourne la **description** (nom) dâ€™un item.  
- `ObtenirEffetEquipement(int indexItem)` â†’ retourne lâ€™**effet** dâ€™un item.  

---

### 2ï¸âƒ£ Instructions gÃ©nÃ©rales

Chaque getter doit :

1. VÃ©rifier si lâ€™index est valide (entre `0` et `gListeEquipement.Length - 1`)  
   - Si invalide â†’ retourner `INVALIDE` (ou `DESC_INVALIDE` pour la description).

2. RÃ©cupÃ©rer la ligne correspondante dans `gListeEquipement`.  
   - Exemple : `string item = gListeEquipement[indexItem];`

3. DÃ©couper la chaÃ®ne en utilisant `.Split(';')`.  
   - Cela donne un tableau de sous-chaÃ®nes.  
   - Exemple : `string[] infos = item.Split(';');`

4. Retourner la bonne valeur selon la constante :  
   - `EQUIP_PRIX` â†’ prix (convertir en `int`)  
   - `EQUIP_POIDS` â†’ poids (convertir en `double`)  
   - `EQUIP_DESC` â†’ description (string)  
   - `EQUIP_EFFET` â†’ effet (string)

---

### 3ï¸âƒ£ Pseudo-code : Exemple pour le prix

```pseudo
fonction ObtenirPrixEquipement(indexItem)
    si indexItem < 0 ou indexItem >= longueur(gListeEquipement)
        retourner INVALIDE

    item = gListeEquipement[indexItem]
    infos = item.Split(';')
    prixTexte = infos[EQUIP_PRIX]
    prixNombre = convertir_en_int(prixTexte)
    retourner prixNombre
fin fonction
```

---

### 4ï¸âƒ£ Test rapide

Dans la fonction `Tests()`, affiche les infos de tous les items :

```csharp
static void Tests()
{
    for (int i = 0; i < gListeEquipement.Length; i++)
    {
        Console.WriteLine(
            $"{ObtenirDescriptionEquipement(i)} " +
            $"- {ObtenirPrixEquipement(i)} po " +
            $"- {ObtenirPoidsEquipement(i)} Kg " +
            $"- Effet : {ObtenirEffetEquipement(i)}"
        );
    }
}
```

---

âœ… **RÃ©sultat attendu** :  
La console doit afficher une liste lisible avec description, prix, poids **et effet** pour chaque item.


---

## Ã‰tape 4 â€” GÃ©rer le sac Ã  dos

### ğŸ¯ Objectif

Mettre en place les fonctions qui permettent de :

- ğŸ“¦ Afficher le contenu du sac Ã  dos  
- ğŸ” Trouver une case libre dans le sac  
- â• Ajouter un item dans le sac (en tenant compte de la place et du poids)  
- âš–ï¸ Calculer le poids total du sac  

---

### 1ï¸âƒ£ Constantes utiles

```csharp
const int VIDE = -1;     // Espace du sac vide
const int SAC_PLEIN = -1; // Sac plein
```

---

### 2ï¸âƒ£ Afficher le sac Ã  dos

But : lister les items prÃ©sents, ou afficher "Aucun item" si le sac est vide.

```pseudo
fonction AfficherSacADos()
    afficher "Sac Ã  dos :"
    mettre une variable vide = vrai
    pour chaque case du sac
        si case â‰  VIDE
            afficher description de l'item
            vide = faux
    fin pour
    si vide == vrai
        afficher "Aucun item."
fin fonction
```

---

### 3ï¸âƒ£ Trouver un espace libre

```pseudo
fonction TrouverIndexEspaceLibreSacAdos()
    pour i de 0 Ã  longueur du sac
        si sac[i] == VIDE
            retourner i
    retourner SAC_PLEIN
fin fonction
```

---

### 4ï¸âƒ£ Ajouter un item au sac

But : vÃ©rifier les conditions avant dâ€™ajouter.

1. VÃ©rifier sâ€™il reste une case libre avec `TrouverIndexEspaceLibreSacAdos`.  
   - Si aucune â†’ message "Sac plein".

2. VÃ©rifier si le poids total + poids du nouvel item â‰¤ force du personnage.  
   - Si trop lourd â†’ message "Trop lourd".

3. Sinon, placer lâ€™item dans la case libre.

```pseudo
fonction AjouterAuSacADos(indexItem)
    indexLibre = TrouverIndexEspaceLibreSacAdos()
    si indexLibre == SAC_PLEIN
        afficher "Sac plein"
        retourner faux

    si PoidsDuSac() + PoidsItem(indexItem) > force
        afficher "Item trop lourd"
        retourner faux

    sac[indexLibre] = indexItem
    afficher "Item ajoutÃ© au sac"
    retourner vrai
fin fonction
```

---

### 5ï¸âƒ£ Calculer le poids du sac

```pseudo
fonction ObtenirPoidsDuSacADos()
    poidsTotal = 0
    pour i de 0 Ã  longueur du sac
        poids = ObtenirPoidsEquipement(sac[i])
        si poids != INVALIDE
            poidsTotal += poids
    retourner poidsTotal
fin fonction
```

---

### âœ… Test rapide

Dans la fonction `Tests()`, ajoutez :

```csharp
AfficherSacADos();
Console.WriteLine($"Poids du sac : {ObtenirPoidsDuSacADos()}");
```

---

**RÃ©sultat attendu** :  
- Le programme affiche le contenu du sac.  
- Si le sac est vide â†’ "Aucun item".  
- Lorsquâ€™on ajoute un item, il est listÃ© et le poids total augmente.  
